import{l as a,g as s,e as t,i as e,k as l,a as n,b as r,s as o,r as i,v as d,c,m as u}from"./disclose-version.Cn0pmGqU.js";import{p as g,x as v,y as f,n as $,z as m,i as h,a as p,b as y,m as b,f as S,k as A}from"./utils.1DnUVoB0.js";import{a3 as M,ac as k,p as C,l as w,a as j,f as x,c as E,r as L,t as N,b as T,A as O,g as P,m as R,d as z,z as q}from"./index-client.CIKm0kFa.js";import{o as I}from"./events.BjpvUhcf.js";import{w as V}from"./paths.CVOp7lRW.js";import{t as B,c as D,r as F,g as G}from"./updater.D4IgHll8.js";const H={src:"",delayMs:0,onLoadingStatusChange:void 0},J=a=>{const s={...H,...a},t=B(g(s,"loadingStatus","onLoadingStatusChange")),{src:e,delayMs:l}=t,n=s.loadingStatus??V("loading"),r=I(n,null==s?void 0:s.onLoadingStatusChange);return v([e,l],([a,s])=>{if(f){const t=new Image;t.src=a,t.onload=()=>{if(void 0!==l){const a=window.setTimeout(()=>{r.set("loaded")},s);return()=>window.clearTimeout(a)}r.set("loaded")},t.onerror=()=>{r.set("error")}}}),{elements:{image:$("avatar-image",{stores:[e,r],returned:([a,s])=>({src:a,style:m({display:"loaded"===s?"block":"none"})})}),fallback:$("avatar-fallback",{stores:[r],returned:([a])=>({style:"loaded"===a?m({display:"none"}):void 0,hidden:"loaded"===a||void 0})})},states:{loadingStatus:r},options:t}};var K=r("<div><!></div>");var Q=r("<img>");var U=r("<span><!></span>");function W(r,o){const i=a(o,["children","$$slots","$$events","$$legacy"]),d=a(i,["class","delayMs"]);C(o,!1);let c=s(o,"class",8,void 0),g=s(o,"delayMs",8,void 0);h();var v=q(()=>A("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",c()));(function(r,o){const i=a(o,["children","$$slots","$$events","$$legacy"]),d=a(i,["delayMs","loadingStatus","onLoadingStatusChange","asChild","el"]);C(o,!1);let c=s(o,"delayMs",24,()=>{}),u=s(o,"loadingStatus",28,()=>{}),g=s(o,"onLoadingStatusChange",24,()=>{}),v=s(o,"asChild",8,!1),f=s(o,"el",28,()=>{});const{states:{loadingStatus:$},updateOption:m,getAttrs:b}=function(a){const{NAME:s,PARTS:t}={NAME:"avatar",PARTS:["root","image","fallback"]},e=D(s,t),l={...J(F(a)),getAttrs:e};return M(s,l),{...l,updateOption:G(l.options)}}({src:"",delayMs:c(),onLoadingStatusChange:({next:a})=>{var s;return u(a),null==(s=g())||s(a),a}}),S=b("root");w(()=>O(u()),()=>{void 0!==u()&&$.set(u())}),w(()=>O(c()),()=>{m("delayMs",c())}),j(),h();var A=t(),k=x(A);e(k,v,a=>{var s=t(),e=x(s);p(e,o,"default",{attrs:S}),n(a,s)},a=>{var s=K();let t;var e=E(s);p(e,o,"default",{attrs:S}),L(s),l(s,a=>f(a),()=>f()),N(()=>t=y(s,t,{...d,...S})),n(a,s)}),n(r,A),T()})(r,u({get delayMs(){return g()},get class(){return P(v)}},()=>d,{children:(a,s)=>{var e=t(),l=x(e);p(l,o,"default",{}),n(a,e)},$$slots:{default:!0}})),T()}function X(r,g){const v=a(g,["children","$$slots","$$events","$$legacy"]),f=a(v,["class","src","alt"]);C(g,!1);let $=s(g,"class",8,void 0),m=s(g,"src",8,void 0),M=s(g,"alt",8,void 0);h();var E=q(()=>A("aspect-square h-full w-full",$()));(function(r,u){const g=a(u,["children","$$slots","$$events","$$legacy"]),v=a(g,["src","alt","asChild","el"]);C(u,!1);const f=o(),$=()=>c(P(m),"$image",f),m=R(),A=R();let M=s(u,"src",24,()=>{}),E=s(u,"alt",24,()=>{}),L=s(u,"asChild",8,!1),q=s(u,"el",28,()=>{});const I={"data-bits-avatar-image":""};w(()=>O(M()),()=>{d(z(m,function(a=""){const{NAME:s}={NAME:"avatar",PARTS:["root","image","fallback"]},t=k(s);return a?t.options.src.set(a):t.options.src.set(""),t}(M()).elements.image),"$image",f)}),w(()=>$(),()=>{z(A,$())}),w(()=>P(A),()=>{Object.assign(P(A),I)}),j(),h();var V=t(),B=x(V);e(B,L,a=>{var s=t(),e=x(s);p(e,u,"default",{get builder(){return P(A)}}),n(a,s)},a=>{var s=Q();let t;l(s,a=>q(a),()=>q()),b(s,a=>P(A).action(a)),N(()=>t=y(s,t,{...P(A),alt:E(),...v})),S(s),i(s),n(a,s)}),n(r,V),T()})(r,u({get src(){return m()},get alt(){return M()},get class(){return P(E)}},()=>f)),T()}function Y(r,i){const d=a(i,["children","$$slots","$$events","$$legacy"]),g=a(d,["class"]);C(i,!1);let v=s(i,"class",8,void 0);h();var f=q(()=>A("bg-muted flex h-full w-full items-center justify-center rounded-full",v()));(function(r,i){const d=a(i,["children","$$slots","$$events","$$legacy"]),u=a(d,["asChild","el"]);C(i,!1);const g=o(),v=()=>c(S,"$fallback",g),f=R();let $=s(i,"asChild",8,!1),m=s(i,"el",28,()=>{});const{elements:{fallback:S},getAttrs:A}=function(){const{NAME:a}={NAME:"avatar",PARTS:["root","image","fallback"]};return k(a)}(),M=A("fallback");w(()=>v(),()=>{z(f,v())}),w(()=>P(f),()=>{Object.assign(P(f),M)}),j(),h();var O=t(),q=x(O);e(q,$,a=>{var s=t(),e=x(s);p(e,i,"default",{get builder(){return P(f)}}),n(a,s)},a=>{var s=U();let t;var e=E(s);p(e,i,"default",{get builder(){return P(f)}}),L(s),l(s,a=>m(a),()=>m()),b(s,a=>P(f).action(a)),N(()=>t=y(s,t,{...P(f),...u})),n(a,s)}),n(r,O),T()})(r,u({get class(){return P(f)}},()=>g,{children:(a,s)=>{var e=t(),l=x(e);p(l,i,"default",{}),n(a,e)},$$slots:{default:!0}})),T()}export{W as A,Y as a,X as b};
